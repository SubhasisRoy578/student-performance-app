<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Performance Prediction</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body { background-color: #f4f6f8; }
        .progress { height: 25px; }
        canvas { margin-top: 20px; }
    </style>
</head>

<body>
<div class="container d-flex justify-content-center align-items-center min-vh-100">
<div class="card shadow p-4" style="width: 520px;">

<h3 class="text-center mb-4">Student Performance Prediction</h3>

<form method="POST">

<div class="mb-3">
<label>Study Hours per Day</label>
<input type="number" step="0.1" name="study_hours" class="form-control"
value="{{ form_data.study_hours if form_data }}" required>
</div>

<div class="mb-3">
<label>Attendance Percentage (%)</label>
<input type="number" name="attendance" class="form-control"
value="{{ form_data.attendance if form_data }}" required>
</div>

<div class="mb-3">
<label>Internal Marks (out of 100)</label>
<input type="number" name="internal_marks" class="form-control"
value="{{ form_data.internal_marks if form_data }}" required>
</div>

<div class="mb-3">
<label>Previous Semester GPA (0.0 to 10.0)</label>
<input type="number" step="0.1" name="gpa" class="form-control"
value="{{ form_data.gpa if form_data }}" required>
</div>

<div class="mb-3">
<label>Number of Backlogs</label>
<input type="number" min="0" name="backlogs" class="form-control"
value="{{ form_data.backlogs if form_data }}" required>
</div>

<div class="mb-3">
<label>Assignment Completion (%)</label>
<input type="number" min="0" max="100" name="assignments" class="form-control"
value="{{ form_data.assignments if form_data }}" required>
</div>

<div class="mb-3">
<label>Sleep Hours per Day</label>
<input type="number" step="0.1" name="sleep" class="form-control"
value="{{ form_data.sleep if form_data }}" required>
</div>

<div class="mb-3">
<label>Class Participation</label>
<select name="participation" class="form-select">
<option value="0" {% if form_data and form_data.participation=='0' %}selected{% endif %}>Low</option>
<option value="1" {% if form_data and form_data.participation=='1' %}selected{% endif %}>Medium</option>
<option value="2" {% if form_data and form_data.participation=='2' %}selected{% endif %}>High</option>
</select>
</div>

<div class="d-flex gap-2">
<button class="btn btn-primary w-100">Predict</button>
<a href="/" class="btn btn-secondary w-100">Reset</a>
</div>

</form>

{% if prediction %}
<hr>

<h5 class="text-center">{{ prediction }}</h5>

<p><strong>Confidence:</strong> {{ confidence }}%</p>
<div class="progress">
<div class="progress-bar" style="width: {{ confidence }}%">{{ confidence }}%</div>
</div>

<h6 class="mt-3">Performance Factors</h6>
<ul>{% for r in reasons %}<li>{{ r }}</li>{% endfor %}</ul>

<h6>Suggestions for Improvement</h6>
<ul>{% for s in suggestions %}<li>{{ s }}</li>{% endfor %}</ul>

<canvas id="scoreChart"></canvas>
<canvas id="attendanceChart"></canvas>
<canvas id="studyChart"></canvas>
<canvas id="gpaChart"></canvas>

<script>
new Chart(scoreChart,{
type:'bar',
data:{
    labels:['Score','Max'],
    datasets:[{
        label:'Score Comparison',
        data:[{{score}},14]
    }]
}
});

new Chart(attendanceChart,{
type:'line',
data:{
    labels:['Low','Medium','High'],
    datasets:[{
        label:'Performance Score',
        data:[40,65,{{confidence}}],
        tension:0.4
    }]
}
});

new Chart(studyChart,{
type:'bar',
data:{
    labels:['2 hrs','4 hrs','6 hrs'],
    datasets:[{
        label:'Performance Score',
        data:[50,70,{{confidence}}]
    }]
}
});

new Chart(gpaChart,{
type:'line',
data:{
    labels:['6','7','8','9'],
    datasets:[{
        label:'Performance Score',
        data:[55,65,80,{{confidence}}],
        tension:0.4
    }]
}
});
</script>
{% endif %}

</div>
</div>
</body>
</html>




